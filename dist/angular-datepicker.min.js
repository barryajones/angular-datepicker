!function withAngular(angular,navigator){"use strict";var monthAndYearHeader,yearsPaginationHeader,daysColumns,days,A_DAY_IN_MILLISECONDS=864e5,isMobile=function isMobile(){if(navigator.userAgent&&(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)))return!0}(),generateMonthAndYearHeader=function generateMonthAndYearHeader(prevButton,nextButton,preventMobile){return preventMobile&&(isMobile=!1),isMobile?['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="month" title="{{ dateMonthTitle }}" ng-change="selectedMonthHandle(month)">','<option ng-repeat="item in months track by $index" ng-selected="item === month" ng-disabled=\'!isSelectableMaxDate(item + " " + day + ", " + year) || !isSelectableMinDate(item + " " + day + ", " + year)\' ng-value="$index + 1" value="$index + 1">',"{{ item }}","</option>","</select>","</div>","</div>",'<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="mobileYear" title="{{ dateYearTitle }}" ng-change="setNewYear(mobileYear)">','<option ng-repeat="item in paginationYears track by $index" ng-selected="year === item" ng-disabled="!isSelectableMinYear(item) || !isSelectableMaxYear(item)" ng-value="item" value="item">',"{{ item }}","</option>","</select>","</div>","</div>"]:['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-left">','<a class="_720kb-datepicker-calendar-month-button" ng-class="{\'_720kb-datepicker-item-hidden\': !willPrevMonthBeSelectable()}" ng-click="prevMonth()" title="{{ buttonPrevTitle }}">',prevButton,"</a>","</div>",'<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-calendar-month">',"{{ month }}&nbsp;",'<a ng-click="paginateYears(year); showYearsPagination = !showYearsPagination;">',"<span>","{{ year }}","<i ng-class=\"{'_720kb-datepicker-calendar-header-closed-pagination': !showYearsPagination, '_720kb-datepicker-calendar-header-opened-pagination': showYearsPagination}\"></i>","</span>","</a>","</div>",'<div class="_720kb-datepicker-calendar-header-right">','<a class="_720kb-datepicker-calendar-month-button" ng-class="{\'_720kb-datepicker-item-hidden\': !willNextMonthBeSelectable()}" ng-click="nextMonth()" title="{{ buttonNextTitle }}">',nextButton,"</a>","</div>","</div>"]},generateYearsPaginationHeader=function generateYearsPaginationHeader(prevButton,nextButton){return['<div class="_720kb-datepicker-calendar-header" ng-show="showYearsPagination">','<div class="_720kb-datepicker-calendar-years-pagination">','<a ng-class="{\'_720kb-datepicker-active\': y === year, \'_720kb-datepicker-disabled\': !isSelectableMaxYear(y) || !isSelectableMinYear(y)}" ng-click="setNewYear(y)" ng-repeat="y in paginationYears track by $index">',"{{ y }}","</a>","</div>",'<div class="_720kb-datepicker-calendar-years-pagination-pages">','<a ng-click="paginateYears(paginationYears[0])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsPrevDisabled}">',prevButton,"</a>",'<a ng-click="paginateYears(paginationYears[paginationYears.length -1 ])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsNextDisabled}">',nextButton,"</a>","</div>","</div>"]},generateDaysColumns=function generateDaysColumns(){return['<div class="_720kb-datepicker-calendar-days-header">','<div ng-repeat="d in daysInString track by $index">',"{{ ::d }}","</div>","</div>"]},generateDays=function generateDays(){return['<div class="_720kb-datepicker-calendar-body">','<a ng-repeat="px in prevMonthDays track by $index" ng-click="setDatepickerDay(px, monthNumber - 1)" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{ ::px }}","</a>","<a ng-repeat=\"item in days track by $index\" ng-click=\"setDatepickerDay(item, monthNumber)\" ng-class=\"{ '_720kb-datepicker-active': selectedDay === item && selectedMonth === monthNumber && selectedYear === year, '_720kb-datepicker-disabled': !isSelectableMinDate(year + '/' + monthNumber + '/' + item ) || !isSelectableMaxDate(year + '/' + monthNumber + '/' + item) || !isSelectableDate(monthNumber, year, item) || !isSelectableDay(monthNumber, year, item), '_720kb-datepicker-today': item === today.getDate() && monthNumber === (today.getMonth() + 1) && year === today.getFullYear() && !selectedDay}\" class=\"_720kb-datepicker-calendar-day\">","{{ ::item }}","</a>",'<a ng-repeat="nx in nextMonthDays track by $index" ng-click="setDatepickerDay(nx, monthNumber + 1)" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{ ::nx }}","</a>","</div>"]},generateHtmlTemplate=function generateHtmlTemplate(prevButton,nextButton,preventMobile){var toReturn=['<div class="_720kb-datepicker-calendar {{datepickerClass}} {{datepickerID}}" ng-class="{\'_720kb-datepicker-forced-to-open\': checkVisibility()}" ng-blur="hideCalendar()">',"</div>"],iterator=function iterator(aRow){toReturn.splice(toReturn.length-1,0,aRow)};return monthAndYearHeader=generateMonthAndYearHeader(prevButton,nextButton,preventMobile),yearsPaginationHeader=generateYearsPaginationHeader(prevButton,nextButton),daysColumns=['<div class="_720kb-datepicker-calendar-days-header">','<div ng-repeat="d in daysInString track by $index">',"{{ ::d }}","</div>","</div>"],days=['<div class="_720kb-datepicker-calendar-body">','<a ng-repeat="px in prevMonthDays track by $index" ng-click="setDatepickerDay(px, monthNumber - 1)" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{ ::px }}","</a>","<a ng-repeat=\"item in days track by $index\" ng-click=\"setDatepickerDay(item, monthNumber)\" ng-class=\"{ '_720kb-datepicker-active': selectedDay === item && selectedMonth === monthNumber && selectedYear === year, '_720kb-datepicker-disabled': !isSelectableMinDate(year + '/' + monthNumber + '/' + item ) || !isSelectableMaxDate(year + '/' + monthNumber + '/' + item) || !isSelectableDate(monthNumber, year, item) || !isSelectableDay(monthNumber, year, item), '_720kb-datepicker-today': item === today.getDate() && monthNumber === (today.getMonth() + 1) && year === today.getFullYear() && !selectedDay}\" class=\"_720kb-datepicker-calendar-day\">","{{ ::item }}","</a>",'<a ng-repeat="nx in nextMonthDays track by $index" ng-click="setDatepickerDay(nx, monthNumber + 1)" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{ ::nx }}","</a>","</div>"],monthAndYearHeader.forEach(iterator),yearsPaginationHeader.forEach(iterator),daysColumns.forEach(iterator),days.forEach(iterator),toReturn.join("")},datepickerDirective=function datepickerDirective($window,$compile,$locale,$filter,$interpolate,$timeout){var linkingFunction;return{restrict:"AEC",scope:{dateSet:"@",dateMinLimit:"@",dateMaxLimit:"@",dateMonthTitle:"@",dateYearTitle:"@",buttonNextTitle:"@",buttonPrevTitle:"@",dateDisabledDates:"@",dateEnabledDates:"@",dateDisabledWeekdays:"@",dateSetHidden:"@",dateTyper:"@",dateWeekStartDay:"@",datepickerAppendTo:"@",datepickerToggle:"@",datepickerClass:"@",datepickerShow:"@",onDateChange:"&?",localizedMonths:"=?",localizedDays:"=?"},link:function linkingFunction($scope,element,attr){var selector=attr.selector,thisInput=angular.element(selector?element[0].querySelector("."+selector):element[0].children[0]),theCalendar,defaultPrevButton='<b class="_720kb-datepicker-default-button">&lang;</b>',defaultNextButton='<b class="_720kb-datepicker-default-button">&rang;</b>',prevButton=attr.buttonPrev||defaultPrevButton,nextButton=attr.buttonNext||defaultNextButton,dateFormat=attr.dateFormat,dateDisabledDates=$scope.$eval($scope.dateDisabledDates),dateEnabledDates=$scope.$eval($scope.dateEnabledDates),dateDisabledWeekdays=$scope.$eval($scope.dateDisabledWeekdays),date=new Date,isMouseOn=!1,isMouseOnInput=!1,preventMobile=void 0!==attr.datepickerMobile&&"false"!==attr.datepickerMobile,datetime=$locale.DATETIME_FORMATS,pageDatepickers,hours24h=864e5,htmlTemplate=generateHtmlTemplate(prevButton,nextButton,preventMobile),n,getMonth=function getMonth(monthNumber,defaultMonth){return $scope.localizedMonths?$scope.localizedMonths[monthNumber-1]:defaultMonth},getDaysInString=function getDaysInString(stringDays){return $scope.localizedDays?stringDays.map((function mappingFunc(dayIdx){return $scope.localizedDays[dayIdx]})):stringDays.map((function mappingFunc(el){return $filter("date")(new Date(new Date("06/08/2014").valueOf()+864e5*el),"EEE")}))},onClickOnWindow=function onClickOnWindow(){isMouseOn||isMouseOnInput||!theCalendar||$scope.hideCalendar()},setDaysInMonth=function setDaysInMonth(month,year){var i,limitDate=new Date(year,month,0).getDate(),firstDayMonthNumber=new Date(year+"/"+month+"/1").getDay(),lastDayMonthNumber=new Date(year+"/"+month+"/"+limitDate).getDay(),prevMonthDays=[],nextMonthDays=[],howManyNextDays,howManyPreviousDays,monthAlias,dateWeekEndDay;for($scope.days=[],$scope.dateWeekStartDay=$scope.validateWeekDay($scope.dateWeekStartDay),dateWeekEndDay=($scope.dateWeekStartDay+6)%7,i=1;i<=limitDate;i+=1)$scope.days.push(i);if(firstDayMonthNumber===$scope.dateWeekStartDay)$scope.prevMonthDays=[];else{for(howManyPreviousDays=firstDayMonthNumber-$scope.dateWeekStartDay,firstDayMonthNumber<$scope.dateWeekStartDay&&(howManyPreviousDays+=7),monthAlias=1===Number(month)?12:month-1,i=1;i<=new Date(year,monthAlias,0).getDate();i+=1)prevMonthDays.push(i);$scope.prevMonthDays=prevMonthDays.slice(-howManyPreviousDays)}if(lastDayMonthNumber===dateWeekEndDay)$scope.nextMonthDays=[];else{for(howManyNextDays=6-lastDayMonthNumber+$scope.dateWeekStartDay,lastDayMonthNumber<$scope.dateWeekStartDay&&(howManyNextDays-=7),i=1;i<=howManyNextDays;i+=1)nextMonthDays.push(i);$scope.nextMonthDays=nextMonthDays}},resetToMinDate=function resetToMinDate(){$scope.monthNumber=Number($filter("date")(new Date($scope.dateMinLimit),"MM")),$scope.month=getMonth($scope.monthNumber,$filter("date")(new Date($scope.dateMinLimit),"MMMM")),$scope.day=Number($filter("date")(new Date($scope.dateMinLimit),"dd")),$scope.year=Number($filter("date")(new Date($scope.dateMinLimit),"yyyy")),setDaysInMonth($scope.monthNumber,$scope.year)},resetToMaxDate=function resetToMaxDate(){$scope.monthNumber=Number($filter("date")(new Date($scope.dateMaxLimit),"MM")),$scope.month=getMonth($scope.monthNumber,$filter("date")(new Date($scope.dateMaxLimit),"MMMM")),$scope.day=Number($filter("date")(new Date($scope.dateMaxLimit),"dd")),$scope.year=Number($filter("date")(new Date($scope.dateMaxLimit),"yyyy")),setDaysInMonth($scope.monthNumber,$scope.year)},prevYear=function prevYear(){$scope.year=Number($scope.year)-1},nextYear=function nextYear(){$scope.year=Number($scope.year)+1},localDateTimestamp=function localDateTimestamp(rawDate,dateFormatDefinition){var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|MMMM|MMM|MM|M|dd?d?|yy?yy?y?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,formatDate,dateSplit,m,d,y,index,el,longName,shortName;for(index=0;index<datetime.MONTH.length;index+=1){if(longName=datetime.MONTH[index],shortName=datetime.SHORTMONTH[index],-1!==rawDate.indexOf(longName)){rawDate=rawDate.replace(longName,index+1);break}if(-1!==rawDate.indexOf(shortName)){rawDate=rawDate.replace(shortName,index+1);break}}for(dateSplit=rawDate.split(/\D/).filter((function dateSplitFilter(item){return item.length>0})),formatDate=dateFormatDefinition.match(formattingTokens).filter((function fromatDateFilter(item){return null!==item.match(/^[a-zA-Z]+$/i)})),index=0;index<formatDate.length;index+=1)switch(el=formatDate[index],!0){case-1!==el.indexOf("d"):d=dateSplit[index-(formatDate.length-dateSplit.length)];break;case-1!==el.indexOf("M"):m=dateSplit[index-(formatDate.length-dateSplit.length)];break;case-1!==el.indexOf("y"):y=dateSplit[index-(formatDate.length-dateSplit.length)]}return new Date(y+"/"+m+"/"+d)},setInputValue=function setInputValue(){if(!$scope.isSelectableMinDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.day)||!$scope.isSelectableMaxDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.day))return!1;var modelDate=new Date($scope.year+"/"+$scope.monthNumber+"/"+$scope.day);attr.dateFormat?thisInput.val($filter("date")(modelDate,dateFormat)):thisInput.val(modelDate),thisInput.triggerHandler("input"),thisInput.triggerHandler("change"),"function"==typeof $scope.onDateChange&&$scope.onDateChange({value:thisInput.val()})},classHelper_add=function add(ele,klass){var classes;ele.className.indexOf(klass)>-1||((classes=ele.className.split(" ")).push(klass),ele.className=classes.join(" "))},classHelper_remove=function remove(ele,klass){var i,classes;if(-1!==ele.className.indexOf(klass)){for(classes=ele.className.split(" "),i=0;i<classes.length;i+=1)if(classes[i]===klass){classes=classes.slice(0,i).concat(classes.slice(i+1));break}ele.className=classes.join(" ")}},showCalendar=function showCalendar(){pageDatepickers=$window.document.getElementsByClassName("_720kb-datepicker-calendar"),angular.forEach(pageDatepickers,(function forEachDatepickerPages(value,key){pageDatepickers[key].classList?pageDatepickers[key].classList.remove("_720kb-datepicker-open"):classHelper_remove(pageDatepickers[key],"_720kb-datepicker-open")})),theCalendar.classList?(theCalendar.classList.add("_720kb-datepicker-open"),date=dateFormat?localDateTimestamp(thisInput[0].value.toString(),dateFormat):new Date(thisInput[0].value.toString()),$scope.selectedMonth=Number($filter("date")(date,"MM")),$scope.selectedDay=Number($filter("date")(date,"dd")),$scope.selectedYear=Number($filter("date")(date,"yyyy"))):classHelper_add(theCalendar,"_720kb-datepicker-open"),$scope.today=new Date,$timeout((function timeoutForYears(){$scope.selectedDay?($scope.year=$scope.selectedYear,$scope.monthNumber=$scope.selectedMonth):($scope.year=$scope.today.getFullYear(),$scope.monthNumber=$scope.today.getMonth()+1),$scope.month=getMonth($scope.monthNumber,$filter("date")(new Date($scope.year,$scope.monthNumber-1),"MMMM")),setDaysInMonth($scope.monthNumber,$scope.year)}),0)},checkToggle=function checkToggle(){return!$scope.datepickerToggle||$scope.$eval($scope.datepickerToggle)},checkVisibility=function checkVisibility(){return!!$scope.datepickerShow&&(date=dateFormat?localDateTimestamp(thisInput[0].value.toString(),dateFormat):new Date(thisInput[0].value.toString()),$scope.selectedMonth=Number($filter("date")(date,"MM")),$scope.selectedDay=Number($filter("date")(date,"dd")),$scope.selectedYear=Number($filter("date")(date,"yyyy")),$scope.$eval($scope.datepickerShow))},unregisterDataSetWatcher=$scope.$watch("dateSet",(function dateSetWatcher(newValue){newValue&&!isNaN(Date.parse(newValue))&&(date=new Date(newValue),$scope.monthNumber=Number($filter("date")(date,"MM")),$scope.month=getMonth($scope.monthNumber,$filter("date")(date,"MMMM")),$scope.day=Number($filter("date")(date,"dd")),$scope.year=Number($filter("date")(date,"yyyy")),setDaysInMonth($scope.monthNumber,$scope.year),"true"!==$scope.dateSetHidden&&setInputValue())})),unregisterDateMinLimitWatcher=$scope.$watch("dateMinLimit",(function dateMinLimitWatcher(newValue){newValue&&resetToMinDate()})),unregisterDateMaxLimitWatcher=$scope.$watch("dateMaxLimit",(function dateMaxLimitWatcher(newValue){newValue&&resetToMaxDate()})),unregisterDateFormatWatcher=$scope.$watch("dateFormat",(function dateFormatWatcher(newValue){newValue&&setInputValue()})),unregisterDateDisabledDatesWatcher=$scope.$watch("dateDisabledDates",(function dateDisabledDatesWatcher(newValue){newValue&&(dateDisabledDates=$scope.$eval(newValue),$scope.isSelectableDate($scope.monthNumber,$scope.year,$scope.day)||(thisInput.val(""),thisInput.triggerHandler("input"),thisInput.triggerHandler("change"),"function"==typeof $scope.onDateChange&&$scope.onDateChange({value:thisInput.val()})))})),unregisterDateEnabledDatesWatcher=$scope.$watch("dateEnabledDates",(function dateEnabledDatesWatcher(newValue){newValue&&(dateEnabledDates=$scope.$eval(newValue),$scope.isSelectableDate($scope.monthNumber,$scope.year,$scope.day)||(thisInput.val(""),thisInput.triggerHandler("input"),thisInput.triggerHandler("change"),"function"==typeof $scope.onDateChange&&$scope.onDateChange({value:thisInput.val()})))}));for($scope.nextMonth=function nextMonth(){12===$scope.monthNumber?($scope.monthNumber=1,nextYear()):$scope.monthNumber+=1,$scope.dateMaxLimit&&($scope.isSelectableMaxDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.days[0])||resetToMaxDate()),$scope.month=getMonth($scope.monthNumber,$filter("date")(new Date($scope.year,$scope.monthNumber-1),"MMMM")),setDaysInMonth($scope.monthNumber,$scope.year),$scope.day=void 0},$scope.willPrevMonthBeSelectable=function willPrevMonthBeSelectable(){var monthNumber=$scope.monthNumber,year=$scope.year,prevDay=$filter("date")(new Date(new Date(year+"/"+monthNumber+"/01").getTime()-864e5),"dd");return 1===monthNumber?(monthNumber=12,year-=1):monthNumber-=1,!($scope.dateMinLimit&&!$scope.isSelectableMinDate(year+"/"+monthNumber+"/"+prevDay))},$scope.willNextMonthBeSelectable=function willNextMonthBeSelectable(){var monthNumber=$scope.monthNumber,year=$scope.year;return 12===monthNumber?(monthNumber=1,year+=1):monthNumber+=1,!($scope.dateMaxLimit&&!$scope.isSelectableMaxDate(year+"/"+monthNumber+"/01"))},$scope.prevMonth=function managePrevMonth(){1===$scope.monthNumber?($scope.monthNumber=12,prevYear()):$scope.monthNumber-=1,$scope.dateMinLimit&&($scope.isSelectableMinDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.days[$scope.days.length-1])||resetToMinDate()),$scope.month=getMonth($scope.monthNumber,$filter("date")(new Date($scope.year,$scope.monthNumber-1),"MMMM")),setDaysInMonth($scope.monthNumber,$scope.year),$scope.day=void 0},$scope.selectedMonthHandle=function manageSelectedMonthHandle(selectedMonthNumber){$scope.monthNumber=Number($filter("date")(new Date(selectedMonthNumber+"/01/2000"),"MM")),setDaysInMonth($scope.monthNumber,$scope.year),setInputValue()},$scope.setNewYear=function setNewYear(year){if(isMobile||($scope.day=void 0),$scope.dateMaxLimit&&$scope.year<Number(year)){if(!$scope.isSelectableMaxYear(year))return}else if($scope.dateMinLimit&&$scope.year>Number(year)&&!$scope.isSelectableMinYear(year))return;$scope.paginateYears(year),$scope.showYearsPagination=!1,$timeout((function timeoutForYears(){$scope.year=Number(year),setDaysInMonth($scope.monthNumber,$scope.year)}),0)},$scope.hideCalendar=function hideCalendar(){theCalendar.classList?theCalendar.classList.remove("_720kb-datepicker-open"):classHelper_remove(theCalendar,"_720kb-datepicker-open")},$scope.setDatepickerDay=function setDatepickerDay(day,month){var year=$scope.year;month>12&&(month=1,year+=1),month<1&&(month=12,year-=1),$scope.isSelectableDay(month,year,day)&&$scope.isSelectableDate(month,year,day)&&$scope.isSelectableMaxDate(year+"/"+month+"/"+day)&&$scope.isSelectableMinDate(year+"/"+month+"/"+day)&&($scope.year=year,$scope.monthNumber=month,$scope.day=Number(day),$scope.selectedDay=$scope.day,$scope.selectedMonth=$scope.monthNumber,$scope.selectedYear=$scope.year,setInputValue(),attr.hasOwnProperty("dateRefocus")&&thisInput[0].focus(),$scope.hideCalendar())},$scope.paginateYears=function paginateYears(startingYear){var i,theNewYears=[],daysToPrepend=10,daysToAppend=10;for($scope.paginationYears=[],isMobile&&(daysToPrepend=50,daysToAppend=50,$scope.dateMinLimit&&$scope.dateMaxLimit&&(daysToPrepend=(startingYear=new Date($scope.dateMaxLimit).getFullYear())-new Date($scope.dateMinLimit).getFullYear(),daysToAppend=1)),i=daysToPrepend;i>0;i-=1)theNewYears.push(Number(startingYear)-i);for(i=0;i<daysToAppend;i+=1)theNewYears.push(Number(startingYear)+i);"true"===$scope.dateTyper&&thisInput.on("keyup blur",(function onTyping(){if(thisInput[0].value&&thisInput[0].value.length&&thisInput[0].value.length>0)try{(date=dateFormat?localDateTimestamp(thisInput[0].value.toString(),dateFormat):new Date(thisInput[0].value.toString())).getFullYear()&&!isNaN(date.getDay())&&!isNaN(date.getMonth())&&$scope.isSelectableDay(date.getMonth(),date.getFullYear(),date.getDay())&&$scope.isSelectableDate(date.getMonth(),date.getFullYear(),date.getDay())&&$scope.isSelectableMaxDate(date)&&$scope.isSelectableMinDate(date)&&$scope.$apply((function applyTyping(){$scope.monthNumber=Number($filter("date")(date,"MM")),$scope.month=getMonth($scope.monthNumber,$filter("date")(date,"MMMM")),$scope.day=Number($filter("date")(date,"dd")),4===date.getFullYear().toString().length&&($scope.year=Number($filter("date")(date,"yyyy"))),setDaysInMonth($scope.monthNumber,$scope.year)}))}catch(e){return e}})),$scope.dateMaxLimit&&theNewYears&&theNewYears.length&&!$scope.isSelectableMaxYear(Number(theNewYears[theNewYears.length-1])+1)?$scope.paginationYearsNextDisabled=!0:$scope.paginationYearsNextDisabled=!1,$scope.dateMinLimit&&theNewYears&&theNewYears.length&&!$scope.isSelectableMinYear(Number(theNewYears[0])-1)?$scope.paginationYearsPrevDisabled=!0:$scope.paginationYearsPrevDisabled=!1,$scope.paginationYears=theNewYears},$scope.isSelectableDay=function isSelectableDay(monthNumber,year,day){var i=0;if(dateDisabledWeekdays&&dateDisabledWeekdays.length>0)for(;i<=dateDisabledWeekdays.length;i+=1)if(dateDisabledWeekdays[i]===new Date(monthNumber+"/"+day+"/"+year).getDay())return!1;return!0},$scope.isSelectableDate=function isSelectableDate(monthNumber,year,day){var i=0;if(dateDisabledDates&&dateDisabledDates.length>0)for(;i<=dateDisabledDates.length;i+=1)if(new Date(dateDisabledDates[i]).getTime()===new Date(monthNumber+"/"+day+"/"+year).getTime())return!1;if(dateEnabledDates){for(;i<=dateEnabledDates.length;i+=1)if(new Date(dateEnabledDates[i]).getTime()===new Date(monthNumber+"/"+day+"/"+year).getTime())return!0;return!1}return!0},$scope.isSelectableMinDate=function isSelectableMinDate(aDate){return!($scope.dateMinLimit&&new Date($scope.dateMinLimit)&&new Date(aDate).getTime()<new Date($scope.dateMinLimit).getTime())},$scope.isSelectableMaxDate=function isSelectableMaxDate(aDate){return!($scope.dateMaxLimit&&new Date($scope.dateMaxLimit)&&new Date(aDate).getTime()>new Date($scope.dateMaxLimit).getTime())},$scope.isSelectableMaxYear=function isSelectableMaxYear(year){return!($scope.dateMaxLimit&&year>new Date($scope.dateMaxLimit).getFullYear())},$scope.isSelectableMinYear=function isSelectableMinYear(year){return!($scope.dateMinLimit&&year<new Date($scope.dateMinLimit).getFullYear())},$scope.validateWeekDay=function isValidWeekDay(weekDay){var validWeekDay=Number(weekDay,10);return(!validWeekDay||validWeekDay<0||validWeekDay>6)&&(validWeekDay=0),validWeekDay},htmlTemplate=htmlTemplate.replace(/{{/g,$interpolate.startSymbol()).replace(/}}/g,$interpolate.endSymbol()),$scope.dateMonthTitle=$scope.dateMonthTitle||"Select month",$scope.dateYearTitle=$scope.dateYearTitle||"Select year",$scope.buttonNextTitle=$scope.buttonNextTitle||"Next",$scope.buttonPrevTitle=$scope.buttonPrevTitle||"Prev",$scope.monthNumber=Number($filter("date")(date,"MM")),$scope.month=getMonth($scope.monthNumber,$filter("date")(date,"MMMM")),$scope.day=Number($filter("date")(date,"dd")),$scope.dateWeekStartDay=$scope.validateWeekDay($scope.dateWeekStartDay),$scope.dateMaxLimit?$scope.year=Number($filter("date")(new Date($scope.dateMaxLimit),"yyyy")):$scope.year=Number($filter("date")(date,"yyyy")),$scope.months=$scope.localizedMonths?$scope.localizedMonths:datetime.MONTH,$scope.daysInString=[],n=$scope.dateWeekStartDay;n<=$scope.dateWeekStartDay+6;n+=1)$scope.daysInString.push(n%7);$scope.daysInString=getDaysInString($scope.daysInString),$scope.datepickerAppendTo&&-1!==$scope.datepickerAppendTo.indexOf(".")?($scope.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),angular.element(document.getElementsByClassName($scope.datepickerAppendTo.replace(".",""))[0]).append($compile(angular.element(htmlTemplate))($scope,(function afterCompile(el){theCalendar=angular.element(el)[0]})))):$scope.datepickerAppendTo&&-1!==$scope.datepickerAppendTo.indexOf("#")?($scope.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),angular.element(document.getElementById($scope.datepickerAppendTo.replace("#",""))).append($compile(angular.element(htmlTemplate))($scope,(function afterCompile(el){theCalendar=angular.element(el)[0]})))):$scope.datepickerAppendTo&&"body"===$scope.datepickerAppendTo?($scope.datepickerID="datepicker-id-"+((new Date).getTime()+(Math.floor(6*Math.random())+8)),angular.element(document).find("body").append($compile(angular.element(htmlTemplate))($scope,(function afterCompile(el){theCalendar=angular.element(el)[0]})))):(thisInput.after($compile(angular.element(htmlTemplate))($scope)),theCalendar=element[0].querySelector("._720kb-datepicker-calendar")),checkToggle()&&thisInput.on("focus click focusin",(function onFocusAndClick(){isMouseOnInput=!0,isMouseOn||isMouseOnInput||!theCalendar?showCalendar():$scope.hideCalendar()})),thisInput.on("focusout blur",(function onBlurAndFocusOut(){isMouseOnInput=!1})),angular.element(theCalendar).on("mouseenter",(function onMouseEnter(){isMouseOn=!0})),angular.element(theCalendar).on("mouseleave",(function onMouseLeave(){isMouseOn=!1})),angular.element(theCalendar).on("focusin",(function onCalendarFocus(){isMouseOn=!0})),angular.element($window).on("click focus focusin",onClickOnWindow),($scope.dateMinLimit&&!$scope.isSelectableMinYear($scope.year)||!$scope.isSelectableMinDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.day))&&resetToMinDate(),($scope.dateMaxLimit&&!$scope.isSelectableMaxYear($scope.year)||!$scope.isSelectableMaxDate($scope.year+"/"+$scope.monthNumber+"/"+$scope.day))&&resetToMaxDate(),$scope.paginateYears($scope.year),setDaysInMonth($scope.monthNumber,$scope.year),$scope.checkVisibility=checkVisibility,$scope.$on("$destroy",(function unregisterListener(){unregisterDataSetWatcher(),unregisterDateMinLimitWatcher(),unregisterDateMaxLimitWatcher(),unregisterDateFormatWatcher(),unregisterDateDisabledDatesWatcher(),unregisterDateEnabledDatesWatcher(),thisInput.off("focus click focusout blur"),angular.element(theCalendar).off("mouseenter mouseleave focusin"),angular.element($window).off("click focus focusin",onClickOnWindow),$scope.prevMonthDays.length=0,$scope.nextMonthDays.length=0,$scope.days.length=0,$scope.selectedMonth=null,$scope.selectedDay=null,$scope.selectedYear=null,theCalendar.remove(),thisInput.remove(),monthAndYearHeader.remove(),yearsPaginationHeader.remove(),daysColumns.remove(),days.remove(),prevButton=null,nextButton=null,htmlTemplate.find("*").off().remove(),htmlTemplate.remove(),htmlTemplate=null,element.remove(),element=null}))}}};angular.module("720kb.datepicker",[]).directive("datepicker",["$window","$compile","$locale","$filter","$interpolate","$timeout",datepickerDirective])}(angular,navigator);